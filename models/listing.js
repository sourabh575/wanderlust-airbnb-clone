const mongoose = require('mongoose');
const Schema = mongoose.Schema;
const review = require('./review');
const user = require('./user');


const listingSchema = new Schema({
    title: { 
        type: String,
        required: true
    },
    description: String,
    image: {
        type: String,
        default: "",
        set: (v) => {
            if (typeof v === 'object' && v.url) {
                return v.url;
            }
            return v === "" ? "data:image/jpeg;base64,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" : v;
        }
    },
    price: Number,
    location: String,
    country: String, 
    reviews:[
        {
            type:Schema.Types.ObjectId, 
             ref:"Review",   
        }
    ],
    owner:{
           type:Schema.Types.ObjectId,
        ref:"User",
    }  
    
});

listingSchema.post("findOneAndDelete",async(listing)=>{
    if(listing){
         await review.deleteMany({id:{$in: listing.reviews}});
    }
})

const Listing = mongoose.model("Listing", listingSchema);
module.exports = Listing;

 